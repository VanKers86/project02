{# extend the parent tpl #}
{% extends 'consoleDietician.twig' %}

{# set the pagetitle in the parent tpl #}
{% set pageTitle = customer.name %}
{% set contentId = 'console' %}
{% set javascript = 'dieticianViewCustomer' %}
{% set jsPlugin = 'jquery.numeric' %}
{% set jchart = true %}

{# set variables in the console tpl #}
{% set customersActive = true %}

{% block subheader %}
    <input type="hidden" id="customerId" value="{{ customer.id }}">
    <input type="hidden" id="dieticianId" value="{{ dietician.id }}">

    <h1>{{ customer.name }}</h1>
    <p>
        <span id="customerGender" class="{% if customer.gender == "M" %}male{% elseif customer.gender == "F" %}female{% endif %}">&nbsp;</span>
        <span class="age">Leeftijd: {{ customer.age }}</span>
        <span class="birthdate">({{ customer.birthdateFormat }})</span>
    </p>  
    <p> 
        <span class="email">{{ customer.email }}</span><br />
        {% if customer.phone %}
        <span class="phone">{{ customer.phone }}</span>
        {% endif %}
    </p>
    <p class="addedDate">Toegevoegd op {{ customer.dateFormat }}</p>
    <div id="deleteCustomer" class="clearfix">
        <a href="#" class="smallButtonLink">Deze klant verwijderen</a>
        <form id="deleteConfirmation" method="POST" class="clearfix">
            <input type="hidden" name="delete" value="deleteOk">
            <input type="submit" class="smallButtonLink" id="deleteConfirm" value="Verwijder">
            <input type="submit" class="smallButtonLink" id="deleteAnnulation" value="Annuleer">
        </form>
    </div>
{% endblock %}

{% set breadcrumb = true %}    
{% block breadcrumb %}
    <a title="Klanten" href="{{ app.request.baseUrl }}/dietist/klanten">Klanten</a> <span class="current">{{ customer.name }}</span>
{% endblock %}

{% block consolePageContent %}
    
    <div class="subfield">
        <a href="#">Stuur een opmerking naar deze klant</a> <br />
    </div>
    
    <div class="subfield shown" id="meals">
        <h2 class="meals">Maaltijden</h2>
        <div id="datepickerShowMeals"></div>
        <input type="hidden" id="showMeals" autocomplete="off" />
        <div id="showMealsDate" class="clearfix">
            <h3></h3>
            <ul>
            </ul>
        </div>
    </div>     
    
    <div class="subfield shown" id="consults">
        <h2 class="consultation">Consultaties
            <select autocomplete="off" id="previousConsults">
                {% for consultation in consultations %}
                <option value="cons{{ consultation.id}}">{{ consultation.dateFormat }}</option>
                {% endfor %}
            </select>    
        </h2>
        {% for key, consultation in consultations %}
        <div id="cons{{ consultation.id }}" class="consult clearfix">
            <input type="hidden" class="consDateFormat" value="{{ consultation.dateFormat }}" />
            <h3>
                Consultatie <span class="nr">{{ loop.revindex }}</span>/{{ loop.length }}<span class="consDate"></span>
            </h3>            
            <ul class="consult">
                <li class="customerData">Anamnetische gegevens</li>
                <li class="weight">
                    Gewicht:
                    {{ consultation.weight }} kg
                </li>
                <li class="height">
                    Lengte:
                    {{ consultation.height }} cm
                </li>             
                <li class="bmi">
                    BMI:
                    <span class="bmiSpan">{{ consultation.bmi }}</span>
                </li>              
                <li class="pal">
                    PAL:
                    {{ consultation.PAL }}
                </li>            
                <li class="customerData">Dagelijkse aanbevolen hoeveelheid</li>
                <li class="energy">
                    Energie:
                    {{ consultation.kcal }} kcal
                </li>
                <li class="carbs">
                    Koolhydraten:
                    {{ consultation.carbohydrates }} g
                </li>
                <li class="sugar">
                    Suikers:
                    {{ consultation.sugars }} g
                </li>
                <li class="protein">
                    Eiwitten:
                    {{ consultation.proteins }} g
                </li>
                <li class="fat">
                    Vetten:
                    {{ consultation.fats }} g
                </li>
                <li class="cholesterol">
                    Cholesterol: &lt;
                    {{ consultation.cholesterol }} g
                </li>
                <li class="fibre">
                    Vezels: &lt;
                    {{ consultation.fibres }} mg
                </li>
                <li class="salt">
                    Natrium: &gt;
                    {{ consultation.sodium }} mg
                </li>
                {% if consultation.comments %}
                <li class="customerData">Opmerkingen</li>
                <li class="comments">
                    {{ consultation.comments }}
                </li>   
                {% endif %}
            </ul>
        </div>
        {% endfor %}
        
        <a class="smallButtonLink" href="{{ app.request.baseUrl }}/dietist/klanten/{{ customer.id }}/consultatie">Nieuwe consultatie toevoegen</a>   
    </div>   
    
    <div class="subfield shown" id="progression">
        <h2 class="progression">Progressie</h2>
        <div id="chartWeight" class="chart"></div>
        <div id="chartBMI" class="chart"></div>
    </div>
    
    
{% endblock %}